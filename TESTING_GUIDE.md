# ?? 霍夫曼壓縮工具測試指南

## ?? 測試前準備

### 1. 確認開發環境
- ? Visual Studio 2022 已安裝
- ? MASM 組譯器已設定
- ? Irvine32 Library 已安裝
- ? 專案可以成功編譯

### 2. 準備測試檔案

在專案目錄下創建以下測試檔案：

#### test_input.txt（簡單測試）
```
AAAAABBBBBCCCCCDDDDD
```

#### test_large.txt（較大測試）
```
This is a test file for Huffman compression.
The quick brown fox jumps over the lazy dog.
AAAAAAAAAA
BBBBBBBBBB
CCCCCCCCCC
```

#### test_empty.txt（空檔案測試）
```
（完全空白）
```

## ?? 測試項目清單

### 第一階段：GUI 基本功能測試

#### 測試 1：程式啟動
1. 執行 `Project.exe` 或按 F5
2. **預期結果**：
   - ? 視窗正常顯示
   - ? 看到「Huffman File Compressor v1.0」標題
   - ? 看到三個按鈕：Compress File, Decompress File, Exit
   - ? 狀態區域顯示：「Ready. Please select an operation.」

#### 測試 2：退出功能
1. 點擊 "Exit" 按鈕
2. **預期結果**：
   - ? 程式正常關閉

---

### 第二階段：檔案選擇對話框測試

#### 測試 3：開啟檔案對話框（壓縮）
1. 執行程式
2. 點擊 "Compress File" 按鈕
3. **預期結果**：
   - ? 彈出檔案選擇對話框
 - ? 標題顯示：「Select File to Compress」
   - ? 過濾器顯示：「Text Files (*.txt)」和「All Files (*.*)」

4. 選擇 `test_input.txt`
5. **預期結果**：
   - ? 彈出「Save As」對話框
   - ? 預設檔名為：`test_input.huf`

6. 點擊「儲存」
7. **預期結果**：
   - ? 顯示壓縮統計資訊（模擬）
   - ? 彈出訊息框：「Operation completed successfully!」
   - ? 狀態列更新顯示壓縮率

#### 測試 4：開啟檔案對話框（解壓縮）
1. 點擊 "Decompress File" 按鈕
2. **預期結果**：
   - ? 彈出檔案選擇對話框
   - ? 標題顯示：「Select File to Decompress」
   - ? 過濾器顯示：「Huffman Files (*.huf)」

3. 選擇一個 `.huf` 檔案（如果有的話）
4. **預期結果**：
   - ? 彈出「Save As」對話框
   - ? 預設檔名為：`檔名.txt`

#### 測試 5：取消操作
1. 點擊 "Compress File"
2. 在檔案選擇對話框中點擊「取消」
3. **預期結果**：
   - ? 對話框關閉
   - ? 程式回到主視窗
   - ? 沒有錯誤訊息

---

### 第三階段：檔案 I/O 函式測試

#### 測試 6：檔案驗證功能

**測試 6.1：正常檔案**
1. 選擇 `test_input.txt`（大小 < 10MB）
2. **預期結果**：
   - ? 檔案驗證通過
   - ? 顯示檔案大小

**測試 6.2：空檔案**
1. 選擇 `test_empty.txt`（0 bytes）
2. **預期結果**：
   - ? 彈出錯誤訊息：「File is empty!」
   - ? 操作中止

**測試 6.3：不存在的檔案**
1. 手動輸入不存在的檔名（如修改對話框）
2. **預期結果**：
   - ? 彈出錯誤訊息：「Cannot open file!」

**測試 6.4：超大檔案**
1. 創建一個 > 10MB 的檔案
2. 嘗試壓縮
3. **預期結果**：
   - ? 彈出警告訊息：「File is too large (max 10MB)!」
   - ? 操作中止

---

### 第四階段：狀態更新測試

#### 測試 7：狀態訊息顯示
1. 選擇檔案進行壓縮
2. **檢查以下狀態變化**：
   - ? 初始：「Ready. Please select an operation.」
   - ? 選擇檔案後：「Selected: [檔名] ([大小] bytes)」
   - ? 處理中：「Compressing file...」
 - ? 完成後：顯示壓縮統計

#### 測試 8：壓縮率計算
1. 選擇 `test_input.txt` 壓縮
2. **預期結果**：
   - ? 狀態列顯示：「Input: XX bytes | Output: YY bytes | Compression: ZZ%」
   - ? 訊息框也顯示相同資訊

---

### 第五階段：檔名生成測試

#### 測試 9：自動檔名生成

**測試 9.1：壓縮檔名**
1. 選擇 `test_input.txt`
2. **預期結果**：
   - ? 自動建議檔名：`test_input.huf`

**測試 9.2：解壓縮檔名**
1. 選擇 `test_input.huf`
2. **預期結果**：
   - ? 自動建議檔名：`test_input.txt`

**測試 9.3：無副檔名處理**
1. 選擇沒有副檔名的檔案
2. **預期結果**：
   - ? 正確加上 `.huf` 或 `.txt`

---

## ?? 進階測試（選用）

### 測試 10：記憶體管理測試
1. 連續操作 10 次（選擇檔案 → 壓縮 → 關閉）
2. **預期結果**：
   - ? 沒有記憶體洩漏
   - ? 程式反應正常

### 測試 11：特殊字元檔名測試
1. 使用包含特殊字元的檔名（如中文、空格）
2. **預期結果**：
   - ? 能正確處理或顯示友善錯誤訊息

### 測試 12：路徑長度測試
1. 使用非常長的檔案路徑
2. **預期結果**：
   - ? 不會崩潰
   - ? 能正常處理或顯示錯誤

---

## ?? 測試結果記錄表

| 測試編號 | 測試項目 | 預期結果 | 實際結果 | 通過/失敗 | 備註 |
|---------|----------|---------|---------|----------|------|
| 1 | 程式啟動 | GUI 正常顯示 | | ? | |
| 2 | 退出功能 | 程式正常關閉 | | ? | |
| 3 | 壓縮對話框 | 顯示檔案選擇 | | ? | |
| 4 | 解壓縮對話框 | 顯示檔案選擇 | | ? | |
| 5 | 取消操作 | 無錯誤 | | ? | |
| 6.1 | 正常檔案驗證 | 通過 | | ? | |
| 6.2 | 空檔案檢測 | 顯示錯誤 | | ? | |
| 6.3 | 不存在檔案 | 顯示錯誤 | | ? | |
| 6.4 | 超大檔案 | 顯示警告 | | ? | |
| 7 | 狀態訊息 | 正確更新 | | ? | |
| 8 | 壓縮率計算 | 正確顯示 | | ? | |
| 9.1 | 壓縮檔名生成 | .huf 副檔名 | | ? | |
| 9.2 | 解壓縮檔名生成 | .txt 副檔名 | | ? | |

---

## ?? 常見問題排除

### 問題 1：程式無法啟動
**可能原因**：
- 缺少 Irvine32.lib
- 缺少 kernel32.lib 等系統函式庫

**解決方法**：
1. 檢查專案屬性 → Linker → Input
2. 確認所有函式庫都已加入

### 問題 2：對話框無法顯示
**可能原因**：
- RC 檔案未正確編譯
- 資源 ID 不匹配

**解決方法**：
1. 檢查 `HuffmanGUI.rc` 是否包含在專案中
2. 確認 `resource.h` 中的 ID 定義正確

### 問題 3：檔案操作失敗
**可能原因**：
- 檔案權限問題
- 路徑包含無效字元

**解決方法**：
1. 以系統管理員身分執行
2. 檢查檔案路徑

---

## ? 測試完成檢查清單

- [ ] 所有基本功能測試通過
- [ ] 錯誤處理測試通過
- [ ] GUI 操作流暢
- [ ] 沒有記憶體洩漏
- [ ] 沒有崩潰或當機
- [ ] 訊息顯示正確且清楚
- [ ] 檔案操作安全可靠

---

## ?? 測試報告範本

```
測試日期：____年__月__日
測試人員：____________
測試環境：Windows __ / Visual Studio 2022

總測試項目：12 項
通過項目：__ 項
失敗項目：__ 項
通過率：__%

主要發現問題：
1. ________________
2. ________________

建議改進：
1. ________________
2. ________________

整體評價：
□ 優秀  □ 良好  □ 尚可  □ 需改進
```

---

**測試完成後，記得將結果記錄下來，並與組員分享！** ??
